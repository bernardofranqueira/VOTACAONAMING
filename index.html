<script>
    let selectedButton = null;
    let votes = JSON.parse(localStorage.getItem('votes')) || {
        'ADEAN': 0, 'AEVA': 0, 'LYRA': 0, 'LUMEX': 0,
        'AEON': 0, 'ALBA': 0, 'NOVA': 0, 'SEMA': 0,
        'PRIMA': 0, 'NEXUS': 0, 'GERMEN': 0, 'ORIGO': 0
    };

    function saveVotes() {
        localStorage.setItem('votes', JSON.stringify(votes));
    }

    function getTotalVotes() {
        return Object.values(votes).reduce((a, b) => a + b, 0);
    }

    function updateTotalVotes() {
        const totalVotesElement = document.getElementById('total-votes');
        totalVotesElement.textContent = `Total de votos: ${getTotalVotes()}`;
    }

    function toggleSelection(name, button) {
        if (selectedButton) {
            selectedButton.classList.remove('selected');
            selectedButton.textContent = `Selecionar (${votes[selectedButton.dataset.name]} votos)`;
        }
        
        if (selectedButton !== button) {
            votes[name]++;
            button.classList.add('selected');
            button.textContent = `Selecionado (${votes[name]} votos)`;
            selectedButton = button;
            showNotification(name);
        } else {
            votes[name]--;
            selectedButton = null;
            button.textContent = `Selecionar (${votes[name]} votos)`;
            hideNotification();
        }

        saveVotes();
        updateTotalVotes();
        updateAllVoteCounts();
    }

    function updateAllVoteCounts() {
        const buttons = document.querySelectorAll('.button');
        buttons.forEach(button => {
            const name = button.dataset.name;
            if (button !== selectedButton) {
                button.textContent = `Selecionar (${votes[name]} votos)`;
            }
        });
    }

    function showNotification(name) {
        const notification = document.getElementById('notification');
        notification.textContent = `VocÃª selecionou: ${name} (${votes[name]} votos)`;
        notification.style.display = 'block';
    }

    function hideNotification() {
        const notification = document.getElementById('notification');
        notification.style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', function() {
        const buttons = document.querySelectorAll('.button');
        buttons.forEach(button => {
            const name = button.dataset.name;
            button.textContent = `Selecionar (${votes[name]} votos)`;
        });
        updateTotalVotes();
    });
</script>
